<div class="mt-3 w-auto bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm">

    <!-- header -->
    <div class="flex flex-col md:grid md:grid-cols-3 md:items-center gap-4">

        <!-- Left -->
        <div class="md:text-left">
            <h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100">
                Total requests ({{ totalRequests }})
            </h2>
            <p class="text-gray-500 dark:text-gray-400">
                {{ startDate | date:'dd MMMM yyyy' }} to {{ endDate | date:'dd MMMM yyyy' }}
            </p>
        </div>

        <!-- Center -->
        <div class="flex justify-center md:justify-center">
            <input [(ngModel)]="searchText" (keyup)="applyFilter()" placeholder="Search"
                class="w-full md:w-auto text-sm px-4 py-2 rounded shadow-sm 
               bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        </div>

        <!-- Right -->
        <div class="flex flex-row md:justify-end gap-3">
            <button
                class="px-4 py-2 rounded-lg border text-sm text-gray-800 dark:text-gray-100 border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700">
                Print
            </button>
            <button class="px-4 py-2 rounded-lg bg-brand-primary text-white text-sm">
                Export Excel
            </button>
        </div>

    </div>

    <!-- Table -->
    <div class="mt-4 overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-700">
        <table mat-table [dataSource]="dataSource" matSort
            class="min-w-max w-full divide-y divide-gray-200 dark:divide-gray-700">

            <!-- Employee Column -->
            <ng-container matColumnDef="employee">
                <th mat-header-cell *matHeaderCellDef mat-sort-header
                    class="px-4 py-2 text-left font-medium text-gray-700 dark:text-gray-200">
                    Employee
                </th>
                <td mat-cell *matCellDef="let element" class="px-4 py-2 text-gray-600 dark:text-gray-300">
                    {{ element.employee }}
                </td>
            </ng-container>

            <!-- Dynamic Leave Type Columns -->
            <ng-container *ngFor="let type of leaveTypeNames" [matColumnDef]="type">
                <th mat-header-cell *matHeaderCellDef mat-sort-header
                    class="px-4 py-2 text-left font-medium text-gray-700 dark:text-gray-200">
                    {{ type }}
                </th>
                <td mat-cell *matCellDef="let element" class="px-4 py-2 text-gray-600 dark:text-gray-300">
                    {{ element[type] }}
                </td>
            </ng-container>

            <!-- Total Days Column -->
            <ng-container matColumnDef="totalDays">
                <th mat-header-cell *matHeaderCellDef
                    class="px-4 py-2 text-left font-medium text-gray-700 dark:text-gray-200">
                    Total (Days)
                </th>
                <td mat-cell *matCellDef="let element" class="px-4 py-2 text-gray-600 dark:text-gray-300">
                    {{ element.totalDays }}
                </td>
            </ng-container>

            <!-- Total Hours Column -->
            <ng-container matColumnDef="totalHours">
                <th mat-header-cell *matHeaderCellDef
                    class="px-4 py-2 text-left font-medium text-gray-700 dark:text-gray-200">
                    Total (Hours)
                </th>
                <td mat-cell *matCellDef="let element" class="px-4 py-2 text-gray-600 dark:text-gray-300">
                    {{ element.totalHours }}
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

        <mat-paginator [pageSizeOptions]="[5, 10, 25]" showFirstLastButtons class="mt-4"></mat-paginator>
    </div>

    <p class="mt-4 text-xs text-red-500 dark:text-red-400">
        Note: Leave types with no maximum balance will not be added to total
    </p>
</div>